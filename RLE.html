<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">

    <title>Run Length Encoding</title>
  </head>
  <body style="background-color: #EEE;" data-ng-app="RLE-App">
  	<div class="w-100" style="margin-bottom: 40px;">
		<nav class="navbar navbar-expand-lg navbar-light bg-light text-center">
		  <h2 style="width: 100%;">Chương Trình Nén Dữ Liệu</h2>
		</nav>
	</div>
	
	<div class="container">
		<div class="row">
			<div class="col-md-6" id="compressArea" data-ng-controller="RLE-Ctrl-Compress">
				<div class="card">
					<div class="card-header text-center">
						Nén File 
					</div>
					<div class="card-body text-primary">
						<form enctype="multipart/form-data" action="/compress" method="POST">
							<div class="custom-file">
								<input type="file" class="custom-file-input" id="uploadFileCompress" name="file" onchange="getFile()" />
								<label for="uploadFileCompress" id="fileNameCompress" class="custom-file-label">Choose file...</label>
								<div class="invalid-feedback"></div>
							</div>
							
							<div class="custom-file">
								<input type="file" class="custom-file-input" id="uploadURLCompress" webkitdirectory directory multiple/>
								<label for="uploadURL" class="custom-file-label" id="directoryNameCompress">Choose Url...</label>
								<div class="invalid-feedback"></div>
							</div>
							
							<div class="ml-3 mt-3 custom-control custom-checkbox mb-3">
								<input type="checkbox" class="custom-control-input" id="compressRLE" name="compressRLE" checked />
								<label class="custom-control-label" for="compressRLE">RLE</label>
								<div class="invalid-feedback"></div>
							</div>
							
							<div class="text-center">
								<button type="submit" class="btn btn-outline-primary">Nén file</button>
								<button type="reset" class="btn btn-outline-danger">Hủy bỏ</button>
							</div>
						</form>
						
					</div>
					<div class="card-footer text-muted">
						<p>Tên file: {{ fileName }}</p>
						<p>Kích thước ban đầu: {{ fileSize }}</p>
						<p>Kích thước đã nén: {{ sizeCompress }}</p>
						<a href="C:\Users\MyPC\Downloads" onclick="">Thư mục lưu trữ file</a>
					</div>
				</div>
			</div>
			
			<div class="col-md-6"  id="deCompressArea" data-ng-controller="RLE-Ctrl-Decompress">
				<div class="card">
					<div class="card-header text-center">
						Giải nén File 
					</div>
					<div class="card-body">
						<form enctype="multipart/form-data" action="/deCompress" method="POST">
							<div class="custom-file">
								<input type="file" class="custom-file-input" id="uploadFileDecompress" name="file" onchange="getFile()" />
								<label for="uploadFileDecompress" id="fileNameDecompress" class="custom-file-label">Choose file...</label>
								<div class="invalid-feedback"></div>
							</div>
							
							<div class="ml-3 mt-3 custom-control custom-checkbox mb-3">
								<input type="checkbox" class="custom-control-input" id="deCompressRLE" name="deCompressRLE" checked>
								<label class="custom-control-label text-primary" for="deCompressRLE">RLE</label>
								<div class="invalid-feedback"></div>
							</div>
							
							<div class="text-center">
								<button type="submit" class="btn btn-outline-info">Giải nén file</button>
								<button type="reset" class="btn btn-outline-danger">Hủy bỏ</button>
							</div>
						</form>
						
					</div>
					<div class="card-footer text-muted">
						<p>Tên file: {{ fileName }}</p>
						<p>Kích thước ban đầu: {{ fileSize }}</p>
						<p>Kích thước đã giải nén: {{ sizeDecompress }}</p>
						<a href="C:\Users\MyPC\Downloads" onclick="">Thư mục lưu trữ file</a>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script>
		function getFile() {
			// Input upload file
			let inputCompressValue = document.getElementById('uploadFileCompress').value;
			let inputDecompressValue = document.getElementById('uploadFileDecompress').value;
			// Input upload URL
			//let inputURLCompressValue = document.getElementById('uploadURLCompress').value;
			//console.log(inputURLCompressValue);
			// Label input file
			let labelFileNameCompress = document.getElementById('fileNameCompress');
			let labelFileNameDeCompress = document.getElementById('fileNameDecompress');
			// Label input directory
			//let labelDirectoryNameCompress = document.getElementById('directoryNameCompress');
					
			let arrFileNameCompress = inputCompressValue.split('\\');
			let arrFileNameDeCompress = inputDecompressValue.split('\\');
			
			//var fileName = arrFileName[arrFileName.length - 1];
			if(inputCompressValue === '' && inputDecompressValue !== '') {
				labelFileNameCompress.innerHTML = 'Choose file...';
				$('#compressArea *').prop('disabled',true);
				labelFileNameDeCompress.innerHTML = arrFileNameDeCompress[arrFileNameDeCompress.length - 1];
				//labelDirectoryNameCompress.innerHTML = inputURLCompressValue;
			} else {
				labelFileNameDeCompress.innerHTML = 'Choose file...';
				$('#deCompressArea *').prop('disabled',true);
				labelFileNameCompress.innerHTML = arrFileNameCompress[arrFileNameCompress.length - 1];
			}
		}
	</script>
	
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="/assets/libs/jquery-3.2.1.slim.min.js"></script>
    <script src="/assets/libs/popper.min.js"></script>
    <script src="/assets/libs/bootstrap.min.js"></script>
    <script src="/assets/libs/angular.min.js"></script>
    <script src="/assets/libs/angular.min.js"></script>
    <script src="main.js"></script>
  </body>
</html>
